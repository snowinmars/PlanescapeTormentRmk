// creator  : D:\Games\NearInfinity-exp\app\NearInfinity.jar (v2.4-20250303)
// game     : D:\Games\Steam\steamapps\common\Project P
// resource : DBRASKEN.DLG
// source   : data\DLGFiles.bif
// dialog   : lang\ru_RU\dialog.tlk
// dialogF  : (none)

BEGIN ~DBRASKEN~
//////////////////////////////////////////////////
// WARNING: this file contains non-trivial WEIGHTs
//////////////////////////////////////////////////

IF WEIGHT #5 /* Triggers after states #: 2 3 14 7 5 even though they appear after this state */
~  NumTimesTalkedTo(0)
~ THEN BEGIN 0 // from:
  SAY #45442 /* ~Браскен громким, оглушающим голосом задает вопрос: «Во имя бездны, что ты делаешь в моем доме?! Уходи, пока я не сделал тебя еще уродливее».~ */
  IF ~  Global("FedEx","Global",2)
PartyHasItem("DBox")
~ THEN REPLY #45443 /* ~«Меня попросили доставить тебе эту шкатулку».~ */ GOTO 8
  IF ~~ THEN REPLY #45445 /* ~«Прощай».~ */ EXIT
END

IF WEIGHT #6 /* Triggers after states #: 2 3 14 7 5 even though they appear after this state */
~  NumTimesTalkedToGT(0)
~ THEN BEGIN 1 // from:
  SAY #45446 /* ~«Что?! Опять ты! Если ты здесь не по делу, советую немедленно покинуть мой дом».~ */
  IF ~  Global("FedEx","Global",2)
PartyHasItem("DBox")
~ THEN REPLY #45447 /* ~«Мне сказали доставить тебе эту шкатулку».~ */ GOTO 8
  IF ~~ THEN REPLY #45448 /* ~«Прошу прощения, ошибся домом. Я уже ухожу».~ */ EXIT
END

IF WEIGHT #4 /* Triggers after states #: 3 14 7 5 even though they appear after this state */
~  GlobalGT("FedEx","Global",2)
~ THEN BEGIN 2 // from:
  SAY #45449 /* ~«Исчезни, дурак! Я уже все сказал тебе о шкатулке Моридора».~ */
  IF ~~ THEN REPLY #45450 /* ~«Прощай».~ */ EXIT
END

IF WEIGHT #3 /* Triggers after states #: 14 7 5 even though they appear after this state */
~  GlobalGT("Demonbox","Global",2)
~ THEN BEGIN 3 // from:
  SAY #45451 /* ~«По Улью ходят слухи, что какой-то рубака смог убить демона, сидевшего в шкатулке Моридора. Говорят, что битва с этим демоном оставила на его теле ужасные шрамы. Случаем, не ты ли тот рубака?»~ */
  IF ~~ THEN REPLY #45452 /* ~«Ну да. А кто еще, по-твоему, смог бы сделать такое?»~ */ GOTO 4
END

IF ~~ THEN BEGIN 4 // from: 3.0
  SAY #45453 /* ~Грохочущий хохот. «Твоя наглость сравнится лишь с твоей смелостью! Мне это нравится. Ты станешь легендой, когда о тебе разойдется народная молва. Позволь мне первым поздравить тебя. Заходи... выпьем вместе, расскажешь мне о своих похождениях».~ */
  IF ~~ THEN REPLY #45454 /* ~«Буду рад пропустить с тобой пару кружек».~ */ DO ~SetGlobal("Drunk","Global",2)
FadeToColor([20.0],0)
Wait(1)
SetAnimState(Myself,ANIM_MIMEDIE)
RestPartyEx(0,10,FALSE)
FadeFromColor([20.0],0)
~ GOTO 6
  IF ~~ THEN REPLY #45455 /* ~«Может, в другой раз. У меня еще много дел. Прощай».~ */ DO ~SetGlobal("Drunk","Global",1)
~ EXIT
END

IF WEIGHT #0 ~  Global("Drunk","Global",1)
~ THEN BEGIN 5 // from:
  SAY #45456 /* ~«О, великий рубака вернулся. Не хочешь выпить? Мне бы очень хотелось послушать о твоих героических подвигах».~ */
  IF ~~ THEN REPLY #45457 /* ~«Буду рад пропустить с тобой пару кружек».~ */ DO ~SetGlobal("Drunk","Global",2)
FadeToColor([20.0],0)
Wait(1)
SetAnimState(Myself,ANIM_MIMEDIE)
RestPartyEx(0,10,FALSE)
FadeFromColor([20.0],0)
~ GOTO 6
  IF ~~ THEN REPLY #45458 /* ~«Может, в другой раз. У меня еще много дел. Прощай».~ */ DO ~SetGlobal("Drunk","Global",1)
~ EXIT
END

IF ~~ THEN BEGIN 6 // from: 4.0 5.0 14.0
  SAY #45459 /* ~После нескольких кружек, песен и шуток Браскен тебе окончательно понравился. Фактически, в таком состоянии тебе бы понравился любой. Вскоре Браскен, пьяный вдрызг, сваливается на пол. Ты понимаешь, что пора уходить. ~ */
  IF ~~ THEN REPLY #45460 /* ~«Прощай».~ */ EXIT
END

IF WEIGHT #1 ~  Global("Drunk","Global",2)
~ THEN BEGIN 7 // from:
  SAY #45461 /* ~«Ох, моя голова! Мне кажется, это никогда не пройдет».~ */
  IF ~~ THEN REPLY #45462 /* ~Оставить Браскена наедине с его головной болью.~ */ DO ~SetAnimState(Myself,ANIM_MIMEDIE)
~ EXIT
END

IF ~~ THEN BEGIN 8 // from: 0.0 1.0
  SAY #45463 /* ~«Ну чего же ты молчал? Давай ее сюда и можешь идти». Когда ты протягиваешь шкатулку Браскену, его выражение лица медленно меняется с предвкушающего в удивленное. «Ого! Нет, я не попадусь на эту уловку во второй раз. Забирай ее обратно и проваливай». ~ */
  IF ~~ THEN REPLY #45464 /* ~«Я не понимаю, почему никто не хочет брать эту шкатулку? Сначала Куатраа, теперь ты».~ */ GOTO 9
END

IF ~~ THEN BEGIN 9 // from: 8.0
  SAY #45465 /* ~«Ты сказал — Куатраа? — Браскен разразился громким хохотом. — Ну да, этот приятель и купил шкатулку у меня. Наверное, думал, что обставил меня на этой покупке. Готов поспорить, он думал, что один только камень из нее стоит гораздо дороже, чем он мне за нее заплатил. Бедняга, он даже не мог себе представить, во что вляпался, пока не стало слишком поздно».~ */
  IF ~~ THEN REPLY #45466 /* ~«Да что такого ужасного в этой шкатулке?»~ */ GOTO 10
  IF ~~ THEN REPLY #46623 /* ~«Мне неинтересна история этой вещи. Просто скажи, как от нее избавиться».~ */ GOTO 13
END

IF ~~ THEN BEGIN 10 // from: 9.0
  SAY #45467 /* ~«То есть ты ничего не знаешь об этой шкатулке? Ну что ж, думаю, что хуже от того, что я скажу, тебе уже не будет. Для начала, чтобы ты там чего не надумал, проклятие этой шкатулки действует только на текущего владельца шкатулки, а чтобы им стать, нужно взять ее по доброй воле».~ */
  IF ~~ THEN REPLY #45468 /* ~«Значит, просто выбросить эту шкатулку, пока кто-нибудь не найдет ее, не получится... а что в шкатулке?»~ */ GOTO 11
END

IF ~~ THEN BEGIN 11 // from: 10.0
  SAY #45469 /* ~«А вот это хороший вопрос. Эта шкатулка появилась в Улье в стародавние времена. О ней витает много слухов. Ты ведь понимаешь, что при каждом пересказе истории истина искажалась все сильнее».~ */
  IF ~~ THEN REPLY #45470 /* ~«Продолжай».~ */ GOTO 12
END

IF ~~ THEN BEGIN 12 // from: 11.0
  SAY #45471 /* ~«Я слышал много историй об этой шкатулке, и все вокруг одно и той же темы. Эту вещицу люди назвали шкатулкой Моридора. Владелец шкатулки умирал, если он или кто-то другой открывал ее. Что касается содержимого, кто знает? Кто-то говорит, что там древний дракон, а кто-то — что злобная душа самого Моридора — я не могу сказать точно. Но уже просто взглянув на нее, любой скажет, что в ней что-то плохое, и будет глупо ее открывать».~ */
  IF ~~ THEN REPLY #45472 /* ~«И что мне теперь делать с ней?»~ */ GOTO 13
END

IF ~~ THEN BEGIN 13 // from: 9.1 12.0
  SAY #45473 /* ~«Я бы посоветовал тебе повидаться с Шиландрой. Она живет в северо-восточной части Улья. У нее я и 'выиграл' эту шкатулку. Кто знает, может, она знает больше о том, что с ней делать. Или ты можешь найти какого-нибудь пустоголового пня, который согласится взять ее у тебя. Тебе решать. Удачи».~ */
  IF ~~ THEN REPLY #45474 /* ~«Прощай».~ */ DO ~SetGlobal("FedEx","Global",3)
SetGlobal("Beta","Global",2)
SetGlobal("Delta","Global",1)
AddexperienceParty(250)
~ JOURNAL #60387 /* ~Поговорив с Браскеном, я многое узнал. Похоже, теперь я — несчастный владелец проклятой шкатулки. Как будто мне и так проблем не хватает. Объект моей легкомысленности теперь обрел имя: шкатулка Моридора. Похоже, что тот, кто добровольно становится владельцем шкатулки, обречен на смерть, если откроет ее. Что у нее внутри — все еще загадка. Браскен посоветовал мне наведаться к Шиландре, которая живет возле Морга в северо-восточной части Улья. Я что, теперь вечно буду искать прежних владельцев это вещи?~ */ EXIT
END

IF WEIGHT #2 ~  GlobalGT("FedEx","Global",9)
~ THEN BEGIN 14 // from:
  SAY #45475 /* ~«Повсюду эта новость! Поздравляю, ты уничтожил проклятие шкатулки Моридора. Признаться, я немного сомневался в том, что такой уродливый пень как ты сможет сделать подобное. Не забывай, что я все еще считаю тебя уродливей задницы баку... но я уважаю то, что тебе удалось сделать. Заходи, выпей со мной, расскажешь, как это тебе удалось».~ */
  IF ~~ THEN REPLY #45476 /* ~«Буду рад пропустить с тобой пару кружек».~ */ DO ~SetGlobal("Drunk","Global",2)
FadeToColor([20.0],0)
Wait(3)
SetAnimState(Myself,ANIM_MIMEDIE)
RestPartyEx(0,10,FALSE)
FadeFromColor([20.0],0)
~ GOTO 6
  IF ~~ THEN REPLY #45477 /* ~«Может, в другой раз. У меня еще много дел. Прощай».~ */ DO ~SetGlobal("Drunk","Global",1)
~ EXIT
END
