// creator  : D:\Games\NearInfinity-exp\app\NearInfinity.jar (v2.4-20250303)
// game     : D:\Games\Steam\steamapps\common\Project P
// resource : DDIMTREE.DLG
// source   : data\DLGFiles.bif
// dialog   : lang\ru_RU\dialog.tlk
// dialogF  : (none)

BEGIN ~DDIMTREE~
//////////////////////////////////////////////////
// WARNING: this file contains non-trivial WEIGHTs
//////////////////////////////////////////////////

IF WEIGHT #4 /* Triggers after states #: 20 22 14 16 even though they appear after this state */
~  NumTimesTalkedTo(0)
~ THEN BEGIN 0 // from:
  SAY #2907 /* ~Ты видишь высокого стройного мужчину со стеклянным взглядом. Кажется, он поглощен каким-то рассказом владельца лавки. Он временами кивает, но сам ничего не говорит.~ */
  IF ~~ THEN REPLY #2908 /* ~«Приветствую».~ */ GOTO 1
  IF ~~ THEN REPLY #35923 /* ~Не обращать на него внимания.~ */ EXIT
END

IF ~~ THEN BEGIN 1 // from: 0.0 13.0
  SAY #35922 /* ~В ответ на твое приветствие человек немного поворачивается, как раз настолько, чтобы увидеть тебя. Ты замечаешь, что у него бледноватый оттенок лица и довольно изможденный вид. Он бросает на тебя бесстрастный взгляд. Похоже, хозяин лавки всего этого не замечает и продолжает лить потоки бесполезной болтовни.~ */
  IF ~~ THEN REPLY #35924 /* ~«У меня есть несколько вопросов...» ~ */ GOTO 2
  IF ~~ THEN REPLY #35925 /* ~«Ты... в порядке?»~ */ GOTO 3
  IF ~~ THEN REPLY #35926 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 2 // from: 1.0
  SAY #35927 /* ~Человек медленно поворачивается обратно к владельцу лавки и кивает в ответ на что-то. Кажется, кивок немного запоздал по отношению к разговору, но лавочник не придает этому значения. Человек медленно поворачивается к тебе, глядя на тебя без выражения.~ */
  IF ~~ THEN REPLY #35928 /* ~«Ты... в порядке?»~ */ GOTO 3
  IF ~~ THEN REPLY #35929 /* ~«Неважно. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 3 // from: 1.1 2.0
  SAY #35930 /* ~Человек продолжает пристально смотреть на тебя и медленно кивает. Ты ожидаешь ответа, но он не отвечает, а только смотрит. Ты уже собираешься разочаровано отвернуться, как вдруг тебе начинает казаться, что ты улавливаешь идущий от него странный запах плесени.~ */
  IF ~~ THEN REPLY #35931 /* ~Подойти поближе и принюхаться.~ */ GOTO 4
  IF ~~ THEN REPLY #35932 /* ~Не обращать на него внимания и уйти.~ */ EXIT
END

IF ~~ THEN BEGIN 4 // from: 3.0
  SAY #35933 /* ~Ты подходишь и принюхиваешься к нему, не зная, чего ожидать. При этом все твои чувства заполняет запах плесени, запах, хорошо тебе знакомый со времен пребывания в морге. Это запах мертвой плоти, удерживаемой от разложения магией.~ */
  IF ~  !Global("Speak_with_Dead","GLOBAL",1)
~ THEN REPLY #35934 /* ~«Ты зомби, не так ли?»~ */ DO ~SetGlobal("Dimtree_zombie","GLOBAL",1)
~ GOTO 5
  IF ~  Global("Speak_with_Dead","GLOBAL",1)
~ THEN REPLY #35935 /* ~«Ты зомби, не так ли?»~ */ DO ~SetGlobal("Dimtree_zombie","GLOBAL",1)
~ GOTO 6
END

IF ~~ THEN BEGIN 5 // from: 4.0
  SAY #35936 /* ~Человек снова медленно кивает тебе, затем переключает внимание на владельца лавки. Он не реагирует на все дальнейшие попытки заговорить с ним.~ */
  IF ~~ THEN REPLY #35937 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 6 // from: 4.1
  SAY #35938 /* ~Существо продолжает безучастно пялиться на тебя. Медленно, будто прилагая огромные усилия, он отвечает тебе. Только твоя способность разговаривать с мертвыми позволяет тебе понимать его. «Да... я... Димтри».~ */
  IF ~~ THEN REPLY #35939 /* ~«Зачем ты здесь находишься, Димтри?»~ */ GOTO 7
  IF ~~ THEN REPLY #35940 /* ~«У меня есть несколько вопросов...» ~ */ GOTO 12
  IF ~~ THEN REPLY #35941 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 7 // from: 6.0
  SAY #35942 /* ~Димтри медленно обращает взгляд на лавочника и делает немощный жест в его сторону. Расценив это как проявление интереса, лавочник удваивает свои усилия в донесении какой-то там истории бедному созданию. Димтри снова смотрит на тебя. «Хамрис... Он болтает... Хамрис никогда не умолкает... Бродит по городу... надоедает хозяину, надоедает всем подряд... Хозяин создает Димтри... Приказывает Димтри разговаривать с Хамрисом... Теперь Хамрис остается в лавке... Хозяин доволен... город доволен. Димтри опечален...»~ */
  IF ~~ THEN REPLY #35943 /* ~«Я могу тебе чем-нибудь помочь, Димтри?»~ */ DO ~SetGlobal("Release_Dimtree","GLOBAL",1)
~ GOTO 8
  IF ~~ THEN REPLY #35944 /* ~«У меня есть вопросы к тебе...»~ */ GOTO 12
  IF ~~ THEN REPLY #35945 /* ~«Прощай, Димтри».~ */ EXIT
END

IF ~~ THEN BEGIN 8 // from: 7.0
  SAY #35946 /* ~Существо умолкает, затем возобновляет свою долгую беседу с тобой. Ты почти различаешь в его голосе нотки мольбы. «Да... Найди хозяина... Себастиона... Попроси освободить меня... Пожалуйста... — он быстро поворачивается к Хамрису. — Прошу...»~ */
  IF ~~ THEN REPLY #35947 /* ~«Почему бы мне просто не избавить тебя от страданий?»~ */ GOTO 9
  IF ~~ THEN REPLY #35948 /* ~«Не знаю... Я подумаю об этом. У меня есть еще вопросы...»~ */ GOTO 12
  IF ~~ THEN REPLY #35949 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 9 // from: 8.0
  SAY #35950 /* ~Димтри с трудом качает тебе головой. «Нет... Хозяин оживит... Нужно попросить хозяина... Себастиона... пожалуйста». Он ждет твоего ответа.~ */
  IF ~~ THEN REPLY #35951 /* ~«Конечно, Димтри. Посмотрим, что я смогу для тебя сделать».~ */ DO ~SetGlobal("Release_Dimtree","GLOBAL",3)
IncrementGlobalOnceEx("GLOBALGood_Dimtree_1","GLOBALGood",1)
~ JOURNAL #35955 /* ~Я согласился помочь зомби Димтри. Я должен найти некоего Себастиона и попросить его избавить Димтри от его теперешнего состояния.~ */ GOTO 10
  IF ~~ THEN REPLY #35952 /* ~«Извини, Димтри. Это не моя работа, понимаешь?»~ */ DO ~SetGlobal("Release_Dimtree","GLOBAL",2)
~ GOTO 11
  IF ~~ THEN REPLY #35953 /* ~«Не знаю... Я подумаю об этом. У меня есть еще вопросы...»~ */ GOTO 12
  IF ~~ THEN REPLY #35954 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 10 // from: 9.0
  SAY #35956 /* ~Ты почти ощущаешь чувство облегчения, исходящее от зомби. «Димтри... благодарит тебя, друг...»~ */
  IF ~~ THEN REPLY #35957 /* ~«Не за что. У меня несколько вопросов...»~ */ GOTO 12
  IF ~~ THEN REPLY #35958 /* ~«Прощай, Димтри».~ */ EXIT
END

IF ~~ THEN BEGIN 11 // from: 9.1
  SAY #35959 /* ~Ты ощущаешь в воздухе чувство досады, когда Димтри отворачивается от тебя. Он снова начинает кивать лавочнику, который даже на секунду не остановил свой поток слов на протяжении всего вашего разговора.~ */
  IF ~~ THEN REPLY #35960 /* ~Уйти.~ */ EXIT
END

IF ~~ THEN BEGIN 12 // from: 6.1 7.1 8.1 9.2 10.0 13.2
  SAY #35961 /* ~Существо делает едва различимое движение плечами. «Ничего... не знаю... Димтри вызвал... хозяин... Был в темноте... мире.. покое... Потом Хамрис... Извини... помогу... если смогу...»~ */
  IF ~  Global("Release_Dimtree","GLOBAL",3)
~ THEN REPLY #35962 /* ~«Ты не знаешь, где мне найти Себастиона?»~ */ GOTO 15
  IF ~~ THEN REPLY #35963 /* ~«Понятно... Тогда прощай».~ */ EXIT
END

IF WEIGHT #5 /* Triggers after states #: 20 22 14 16 even though they appear after this state */
~  NumTimesTalkedToGT(0)
~ THEN BEGIN 13 // from:
  SAY #35964 /* ~Высокий худощавый человек все еще разговаривает с лавочником. Тем не менее, из них двоих говорит только лавочник.~ */
  IF ~  Global("Dimtree_zombie","GLOBAL",0)
~ THEN REPLY #35965 /* ~«Приветствую».~ */ GOTO 1
  IF ~  GlobalGT("Dimtree_zombie","GLOBAL",0)
!Global("Speak_with_Dead","GLOBAL",1)
~ THEN REPLY #35966 /* ~«Просто хотел оказать знак уважения... прощай».~ */ EXIT
  IF ~  GlobalGT("Dimtree_zombie","GLOBAL",0)
Global("Speak_with_Dead","GLOBAL",1)
~ THEN REPLY #35967 /* ~«У меня есть несколько вопросов...» ~ */ GOTO 12
  IF ~~ THEN REPLY #35968 /* ~Игнорировать его.~ */ EXIT
END

IF WEIGHT #1 /* Triggers after states #: 16 even though they appear after this state */
~  Global("Release_Dimtree","GLOBAL",3)
~ THEN BEGIN 14 // from:
  SAY #35969 /* ~Когда ты подходишь, Димтри слегка поворачивается к тебе. Ты чувствуешь, как в воздухе над ним повисло чувство ожидания. «Ты... нашел хозяина? Освободишь Димтри?»~ */
  IF ~~ THEN REPLY #35970 /* ~«Ты не знаешь, где мне найти Себастиона?»~ */ GOTO 15
  IF ~~ THEN REPLY #35971 /* ~«Пока нет, Димтри. Я продолжаю работать над этим. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 15 // from: 12.0 14.0 21.0
  SAY #35972 /* ~Существо останавливается. «Не знаю... Помню голос... отдает приказ быть здесь... Иду к... Хамрису... Больше ничего... Извини».~ */
  IF ~~ THEN REPLY #35973 /* ~«Понятно, что ж, прощай».~ */ EXIT
END

IF WEIGHT #0 ~  Global("Release_Dimtree","GLOBAL",4)
~ THEN BEGIN 16 // from:
  SAY #35974 /* ~Когда ты подходишь, Димтри слегка поворачивается к тебе. Ты чувствуешь, как в воздухе над ним повисло чувство ожидания. «Ты... нашел хозяина? Освободишь Димтри?»~ */
  IF ~~ THEN REPLY #35975 /* ~«Да, Димтри. Теперь я знаю, как тебя освободить».~ */ GOTO 17
  IF ~~ THEN REPLY #35976 /* ~«Не сейчас, я должен идти. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 17 // from: 16.0
  SAY #35977 /* ~Димтри поворачивается к тебе и показывает в твою сторону. «Пожалуйста, друг...»~ */
  IF ~~ THEN REPLY #35978 /* ~Произнести слова, которым научил тебя Себастион.~ */ GOTO 18
  IF ~~ THEN REPLY #35979 /* ~«Не сейчас. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 18 // from: 17.0
  SAY #35980 /* ~Ты делаешь паузу, чтобы собраться с мыслями, затем осторожно произносишь слова, которым научил тебя Себастион. Ты протягиваешь руку и легонько касаешься лба Димтри.~ */
  IF ~~ THEN REPLY #35981 /* ~«Покойся с миром, Димтри».~ */ DO ~SetGlobal("Release_Dimtree","GLOBAL",5)
Kill(Myself)
AddexperienceParty(4000)
~ JOURNAL #66526 /* ~Я наложил на Димтри заклинание, которому научился у Себастиона. Теперь он покоится с миром и больше не обязан слушать болтовню Хамриса.~ */ GOTO 19
END

IF ~~ THEN BEGIN 19 // from: 18.0
  SAY #35982 /* ~Со вздохом зомби оседает у твоих ног. Кажется, ты слышишь мимолетное *спасибо, друг*, когда он падает на землю.~ */
  IF ~~ THEN REPLY #35983 /* ~Уйти.~ */ EXIT
END

IF WEIGHT #3 /* Triggers after states #: 22 even though they appear after this state */
~  Global("Release_Dimtree","GLOBAL",1)
~ THEN BEGIN 20 // from:
  SAY #35984 /* ~Димтри поворачивается к тебе. «Ты... поможешь? Ты... найди Себастиона... освободи меня...»~ */
  IF ~~ THEN REPLY #35985 /* ~«Хорошо, я помогу тебе».~ */ DO ~SetGlobal("Release_Dimtree","GLOBAL",3)
IncrementGlobalOnceEx("GLOBALGood_Dimtree_1","GLOBALGood",1)
~ JOURNAL #35955 /* ~Я согласился помочь зомби Димтри. Я должен найти некоего Себастиона и попросить его избавить Димтри от его теперешнего состояния.~ */ GOTO 21
  IF ~~ THEN REPLY #35986 /* ~«Нет, это не моя проблема».~ */ EXIT
  IF ~~ THEN REPLY #35987 /* ~«Не знаю, я подумаю над этим. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 21 // from: 20.0 22.0
  SAY #35989 /* ~Ты почти ощущаешь чувство облегчения, исходящее от зомби. «Димтри... благодарит тебя, друг...»~ */
  IF ~~ THEN REPLY #35990 /* ~«Где я могу найти Себастиона?»~ */ GOTO 15
  IF ~~ THEN REPLY #35991 /* ~«Не за что. Прощай».~ */ EXIT
END

IF WEIGHT #2 ~  Global("Release_Dimtree","GLOBAL",2)
~ THEN BEGIN 22 // from:
  SAY #35992 /* ~Димтри поворачивается к тебе. «Зачем ты здесь... Ты отказался помочь... Ты передумал... найди Себастиона... освободи меня... пожалуйста...»~ */
  IF ~~ THEN REPLY #35993 /* ~«Хорошо, я помогу тебе».~ */ DO ~SetGlobal("Release_Dimtree","GLOBAL",3)
IncrementGlobalOnceEx("GLOBALGood_Dimtree_1","GLOBALGood",1)
~ JOURNAL #35955 /* ~Я согласился помочь зомби Димтри. Я должен найти некоего Себастиона и попросить его избавить Димтри от его теперешнего состояния.~ */ GOTO 21
  IF ~~ THEN REPLY #35994 /* ~«Нет, это не моя проблема».~ */ EXIT
  IF ~~ THEN REPLY #35995 /* ~«Не знаю, я подумаю над этим. Прощай».~ */ EXIT
END
