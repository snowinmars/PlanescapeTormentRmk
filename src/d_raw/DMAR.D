// creator  : D:\Games\NearInfinity-exp\app\NearInfinity.jar (v2.4-20250303)
// game     : D:\Games\Steam\steamapps\common\Project P
// resource : DMAR.DLG
// source   : data\DLGFiles.bif
// dialog   : lang\ru_RU\dialog.tlk
// dialogF  : (none)

BEGIN ~DMAR~
//////////////////////////////////////////////////
// WARNING: this file contains non-trivial WEIGHTs
//////////////////////////////////////////////////

IF WEIGHT #5 /* Triggers after states #: 1 2 20 16 10 even though they appear after this state */
~  NumTimesTalkedTo(0)
~ THEN BEGIN 0 // from:
  SAY #45076 /* ~Твое первое впечатление от Мара: ему не помешало бы хорошенько помыться, чтобы избавиться от вони, которая вырубит любое обладающее обонянием существо. Ты практически видишь ее, она исходит от его тела зловещими желтыми облачками. Он отчаянно машет тебе, пытаясь заставить тебя приблизиться к нему и поговорить с ним.~ */
  IF ~~ THEN REPLY #45077 /* ~Приблизиться к нему и выслушать его.~ */ GOTO 4
  IF ~~ THEN REPLY #45399 /* ~Задержать дыхание и уйти.~ */ EXIT
END

IF WEIGHT #4 /* Triggers after states #: 2 20 16 10 even though they appear after this state */
~  NumTimesTalkedToGT(0)
Global("FedEx","Global",0)
~ THEN BEGIN 1 // from:
  SAY #45400 /* ~Приближаясь к Мару, ты готовишься к его зловонию. «Ты ведь сделаешь одолжение Мару, правда? Тебе нужно доставить шкатулку».~ */
  IF ~~ THEN REPLY #45401 /* ~«Я доставлю твою посылку».~ */ DO ~SetGlobal("FedEx","Global",1)
SetGlobal("Alpha","Global",1)
~ GOTO 6
  IF ~~ THEN REPLY #45402 /* ~«Зачем для доставки этой посылки тебе нужен я?»~ */ GOTO 5
  IF ~~ THEN REPLY #45403 /* ~«Прощай».~ */ EXIT
END

IF WEIGHT #3 /* Triggers after states #: 20 16 10 even though they appear after this state */
~  GlobalGT("FedEx","Global",0)
~ THEN BEGIN 2 // from:
  SAY #45404 /* ~При твоем приближении глаза Мара расширяются в изумлении. Он кричит тонким петушиным голосом: «Зачем ты приперся сюда?! Не возвращайся, пока не доставишь шкатулку».~ */
  IF ~  Global("FedEx","Global",2)
Global("Demonbox","Global",0)
~ THEN REPLY #45405 /* ~«Тот, кому ты просил передать эту шкатулку, убежал. Что теперь?»~ */ GOTO 8
  IF ~  Global("FedEx","Global",10)
~ THEN REPLY #45406 /* ~«Я избавился от шкатулки».~ */ DO ~SetGlobal("FedEx","Global",11)
~ GOTO 11
  IF ~  Global("Demonbox","Global",4)
~ THEN REPLY #45407 /* ~«Я убил демона из шкатулки».~ */ GOTO 18
  IF ~  Global("Demonbox","Global",3)
~ THEN REPLY #45408 /* ~«Я убил демона из шкатулки».~ */ GOTO 19
  IF ~  Global("Demonbox","Global",1)
~ THEN REPLY #45409 /* ~«Я открыл шкатулку, и из нее появился нечистый. Я убежал».~ */ GOTO 3
  IF ~  !Global("FedEx","Global",2)
!Global("FedEx","Global",10)
GlobalGT("FedEx","Global",0)
Global("Demonbox","Global",0)
~ THEN REPLY #45410 /* ~«Никому не нужна эта шкатулка. Забирай ее обратно».~ */ GOTO 9
  IF ~  !Global("FedEx","GLOBAL",10)
Global("Demonbox","Global",2)
~ THEN REPLY #45411 /* ~«Я покинул Улей и ничего не произошло».~ */ GOTO 17
  IF ~~ THEN REPLY #45412 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 3 // from: 2.4
  SAY #45413 /* ~«Да ты чокнутый идиот! Ты подписался под собственной смертью, открыв эту проклятую шкатулку! Беги, если жизнь тебе дорога!» Мар срывается с места.~ */
  IF ~~ THEN REPLY #45414 /* ~«Прощай».~ */ DO ~StartCutSceneMode()
StartCutSceneEx("0100CUT2",FALSE)
~ JOURNAL #39511 /* ~Я совершил две ошибки. Первая — я ослушался Мара и открыл шкатулку. Вторая — я убежал от появившегося нечистого духа. Я не могу исправить первую ошибку, но могу исправить вторую. Я должен убить нечисть.~ */ EXIT
END

IF ~~ THEN BEGIN 4 // from: 0.0
  SAY #46322 /* ~При твоем приближении он начинает заметно волноваться. «Спасибо, что остановился. Меня зовут Мар, я прошу тебя об одной услуге».~ */
  IF ~~ THEN REPLY #46323 /* ~«Я слушаю».~ */ GOTO 5
  IF ~~ THEN REPLY #46324 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 5 // from: 1.1 4.0
  SAY #46325 /* ~«Это вопрос жизни и смерти! Я должен доставить шкатулку, или мне придется несладко! Мне не повезло — я сильно подвернул ногу. Ты не мог бы помочь мне доставить эту шкатулку?»~ */
  IF ~~ THEN REPLY #46326 /* ~«Я доставлю эту шкатулку».~ */ DO ~SetGlobal("FedEx","Global",1)
SetGlobal("Alpha","Global",1)
~ GOTO 6
  IF ~~ THEN REPLY #46327 /* ~«Нет».~ */ EXIT
END

IF ~~ THEN BEGIN 6 // from: 1.0 5.0
  SAY #46328 /* ~Мар бережно достает небольшую шкатулку из складок своей рваной одежды. На какой-то миг ты видишь на его лице сожаление... но оно быстро исчезает; он смотрит на тебя и протягивает тебе шкатулку. Ее окружает легкое мерцание, когда вы с Маром вместе касаетесь ее. Мар издает легкий вздох облегчения, отдавая шкатулку на твое попечение.~ */
  IF ~~ THEN REPLY #46329 /* ~«Что теперь?»~ */ DO ~GiveItemCreate("DBox",Player1,1,0,0)
~ GOTO 7
END

IF ~~ THEN BEGIN 7 // from: 6.0
  SAY #46330 /* ~«Это нужно доставить Куатраа. Обычно его можно найти где-то в юго-восточной части Улья. Да, и попробуй сказать, что я тебя не предупредил: что бы ни случилось, НЕ ОТКРЫВАЙ ШКАТУЛКУ! И не покидай Улей с ней. А теперь шевелись!»~ */
  IF ~~ THEN REPLY #46331 /* ~«Как только я доставлю шкатулку, я вернусь. Прощай».~ */ DO ~SetGlobal("Notalk","AR0100",1)
StartCutSceneMode()
StartCutSceneEx("0100CUT1",FALSE)
~ JOURNAL #39481 /* ~Я согласился доставить странную шкатулку некоему Куатраа. Мар сказал, что обычно его можно найти в юго-восточной части Улья.~ */ EXIT
END

IF ~~ THEN BEGIN 8 // from: 2.0
  SAY #46461 /* ~«Теперь это не моя проблема. Шкатулка магически привязана к тебе до тех пор, пока она не будет доставлена. Советую тебе доставить ее хоть кому-то! И не подходи ко мне до тех пор, пока не избавишься от этой штуки!»~ */
  IF ~  Global("FedEx","Global",2)
~ THEN REPLY #46462 /* ~Кажется, теперь ты предоставлен сам себе. Куатраа ведь упоминал, что шкатулку нужно доставить кому-то еще?~ */ DO ~SetGlobal("Notalk","AR0100",1)
~ EXIT
  IF ~  GlobalGT("FedEx","Global",2)
~ THEN REPLY #46463 /* ~Черт возьми, что же в этой шкатулке...~ */ DO ~SetGlobal("Notalk","AR0100",1)
~ EXIT
END

IF ~~ THEN BEGIN 9 // from: 2.5
  SAY #46464 /* ~Мар в страхе отскакивает. «Нет! Я больше не притронусь этой проклятой шкатулке! Убери ее от меня! Ты добровольно взял шкатулку. Держи ее при себе или отдай кому-нибудь другому — теперь это не моя забота. Но я скажу тебе одну вещь: я лучше сдохну, чем снова свяжусь с этой шкатулкой! А теперь оставь меня в покое!»~ */
  IF ~~ THEN REPLY #46465 /* ~«Как только я разберусь с этой шкатулкой, я вернусь и разберусь с тобой. Прощай».~ */ DO ~SetGlobal("Notalk","AR0100",1)
~ EXIT
END

IF WEIGHT #0 ~  Global("FedEx","Global",9)
~ THEN BEGIN 10 // from:
  SAY #46466 /* ~«Я уже сказал все, что можно было сказать».~ */
  IF ~~ THEN REPLY #46467 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 11 // from: 2.1
  SAY #46468 /* ~«Очень приятно слышать это от тебя. До того, как ты меня убьешь за то, что я тебя обманом всучил тебе эту шкатулку, позволь мне все объяснить...»~ */
  IF ~~ THEN REPLY #46469 /* ~«Ты — покойник».~ */ DO ~GivePartyGold(500)
Enemy()
Attack(Protagonist)
ForceAttack(Protagonist,Myself)
IncrementGlobalOnceEx("GLOBALEvil_Mar_1","GLOBALGood",-1)
~ JOURNAL #60399 /* ~Мое правосудие быстро и не знает милосердия. Мар заплатил за свое преступление жизнью. Я хочу лишь продолжить свои поиски и не желаю чахнуть над магическими шкатулками.~ */ EXIT
  IF ~~ THEN REPLY #46470 /* ~«Я слушаю твои объяснения».~ */ GOTO 12
END

IF ~~ THEN BEGIN 12 // from: 11.1
  SAY #46471 /* ~«Эта шкатулка была здесь с незапамятных времен, никто не помнит, как она появилась здесь. Поговаривают, что здесь была какая-то битва, а когда она закончилась, в эту шкатулку был заточен огромный демон. Другие говорят, что ее сделал злой волшебник, просто чтобы другим было плохо. Никто доподлинно не знает, что на самом деле таится за этой шкатулкой. Но все равно, если ее хозяин ее открывает — он умирает».~ */
  IF ~~ THEN REPLY #46472 /* ~«А почему бы хозяину просто не спрятать шкатулку там, где ее никто не найдет?»~ */ GOTO 13
  IF ~~ THEN REPLY #46473 /* ~«Ничего не хочу об этом слышать. Как мне избавиться от нее?»~ */ GOTO 15
END

IF ~~ THEN BEGIN 13 // from: 12.0
  SAY #46474 /* ~«Ну да, это вроде бы самое простое из всех решений. Да только кто сможет жить с этим смертельным проклятием над головой? Ведь надо все время проверять, чтобы эта чертова шкатулка никуда не пропала. Это любого сведет с ума».~ */
  IF ~~ THEN REPLY #46475 /* ~«Почему я?»~ */ GOTO 14
END

IF ~~ THEN BEGIN 14 // from: 13.0
  SAY #46476 /* ~«Во-первых, потому что я тебя раньше не видел. Видишь ли, мне нужен был пустоголовый пень вроде тебя, который бы *согласился* взять шкатулку и стать ее новым хозяином. Все здешние знают про эту шкатулку и ни за какие коврижки ее не возьмут. Во-вторых, если бы ты осмотрел ее как следует, ты бы заметил, что магия, наложенная на нее, слабеет. Я, как нынешний владелец шкатулки, должен был избавится от нее как можно скорее. Да и вообще, ты больше всех смахивал на того, кому уже пора в другой мир».~ */
  IF ~~ THEN REPLY #46477 /* ~«Хочешь поговорить о другом мире? Еще слово — и сам туда отправишься».~ */ GOTO 15
END

IF ~~ THEN BEGIN 15 // from: 12.1 14.0
  SAY #46478 /* ~«Кажется, я выбрал не того рубаку. Это ведь не причинило никаких неудобств такому как ты? В награду за причиненное беспокойство я могу предложить это оружие и немного звенелок для твоего кошелька. Это все, что у меня есть... забавно: все это мне дал тот крысеныш Куатраа, когда пытался всучить шкатулку».~ */
  IF ~~ THEN REPLY #46479 /* ~«Я все равно убью тебя и заберу награду».~ */ DO ~GivePartyGold(500)
Enemy()
Attack(Protagonist)
ForceAttack(Protagonist,Myself)
IncrementGlobalOnceEx("GLOBALEvil_Mar_1","GLOBALGood",-1)
~ JOURNAL #60399 /* ~Мое правосудие быстро и не знает милосердия. Мар заплатил за свое преступление жизнью. Я хочу лишь продолжить свои поиски и не желаю чахнуть над магическими шкатулками.~ */ EXIT
  IF ~~ THEN REPLY #46480 /* ~«Давай мне награду и уходи».~ */ DO ~GiveItem("Hax",Protagonist)
AddexperienceParty(1250)
GivePartyGold(500)
~ JOURNAL #39484 /* ~Может, и не стоило этого делать, но я все же решил простить Мара за его проступок. И несмотря на то, что я пытаюсь вернуть свои воспоминания, это приключение я бы предпочел забыть.~ */ EXIT
END

IF WEIGHT #1 ~  Global("FedEx","Global",11)
~ THEN BEGIN 16 // from:
  SAY #46481 /* ~«Людям в округе станет легче на душе, когда они узнают, что ты уничтожил эту проклятую шкатулку. Спасибо тебе еще раз!»~ */
  IF ~~ THEN REPLY #46482 /* ~«Рад был помочь. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 17 // from: 2.6
  SAY #46483 /* ~«Ты тупой идиот! Я же говорил тебе не покидать Улей! Быстрее, убирайся от меня подальше, пока оно не пришло за тобой!»~ */
  IF ~~ THEN REPLY #46484 /* ~Мар убегает.~ */ DO ~SetGlobal("Boxleft","Global",1)
SetGlobal("Gamma","Global",1)
StartCutSceneMode()
StartCutSceneEx("0100CUT2",FALSE)
~ JOURNAL #39482 /* ~Покинув Улей, я освободил существо, которое было заточено в шкатулке. Не знаю, почему, но боюсь, что чем бы там оно ни было, оно будет искать последнего хозяина шкатулки. Для своей же безопасности, мне стоит быть теперь осторожней.~ */ EXIT
END

IF ~~ THEN BEGIN 18 // from: 2.2
  SAY #46485 /* ~«Ты открыл шкатулку и все еще жив, чтобы рассказать мне об этом! Э-э... то есть, я же говорил тебе не открывать эту проклятую штуку. Ты не смог доставить шкатулку владельцу, поэтому боюсь, что ты ничего не получишь. А теперь убирайся вон с глаз моих».~ */
  IF ~  Global("FedEx","Global",1)
~ THEN REPLY #46486 /* ~«Прощай».~ */ DO ~SetGlobal("FedEx","Global",9)
SetGlobal("ReleaseB","Global",1)
SetGlobal("Gamma","Global",1)
~ JOURNAL #39507 /* ~Я сказал Мару, что открыл шкатулку и убил нечистого, который был внутри. Поначалу я был зол на Мара, который не сказал мне, что было в шкатулке. Но ведь это я ослушался его. В следующий раз не надо совать свой нос куда попало.~ */ EXIT
  IF ~  GlobalGT("FedEx","Global",1)
~ THEN REPLY #46487 /* ~«Прощай».~ */ DO ~SetGlobal("FedEx","Global",9)
SetGlobal("ReleaseB","Global",1)
SetGlobal("Gamma","Global",1)
~ JOURNAL #39505 /* ~Я сказал Мару, что открыл шкатулку после того, как зашел в тупик с поисками адресата. А теперь он отказывается платить мне за мои труды. Я в смятении: мне нужна хоть какая-то компенсация. В конце концов, ведь я же попытался доставить шкатулку... просто никто захотел ее брать. И в то же время, я ослушался Мара и открыл ее. Хоть я и остался без награды и объяснений Мара, я все же рад, что хоть как-то разобрался с этой шкатулкой и нечистым духом внутри нее.~ */ EXIT
END

IF ~~ THEN BEGIN 19 // from: 2.3
  SAY #46488 /* ~«Я же предупреждал тебя не покидать Улей вместе с этой шкатулкой. Удивительно, как этот нечистый дух не порвал тебя на тряпки. И если ты пришел ко мне за оплатой, то я скажу тебе, что ты ее не получишь! Согласно сделке, ты должен был доставить шкатулку, а не убить нечистого, который был внутри».~ */
  IF ~~ THEN REPLY #46489 /* ~«Прощай».~ */ DO ~SetGlobal("FedEx","Global",9)
SetGlobal("ReleaseH","Global",1)
SetGlobal("Gamma","Global",1)
~ JOURNAL #39504 /* ~Я сказал Мару, что убил нечистого, которого я выпустил, покинув Улей. Хотя его впечатлило то, что я убил нечисть, он отказался оплатить мои услуги. Трудно с ним не согласиться, ведь я ослушался его и не доставил шкатулку, как он сказал.~ */ EXIT
END

IF WEIGHT #2 ~  Global("notalk","AR0100",1)
~ THEN BEGIN 20 // from:
  SAY #46490 /* ~«Я уже сказал все, что можно было сказать».~ */
  IF ~~ THEN REPLY #46491 /* ~«Прощай».~ */ EXIT
END
