// creator  : D:\Games\NearInfinity-exp\app\NearInfinity.jar (v2.4-20250303)
// game     : D:\Games\Steam\steamapps\common\Project P
// resource : DPREGAL.DLG
// source   : data\DLGFiles.bif
// dialog   : lang\ru_RU\dialog.tlk
// dialogF  : (none)

BEGIN ~DPREGAL~
//////////////////////////////////////////////////
// WARNING: this file contains non-trivial WEIGHTs
//////////////////////////////////////////////////

IF WEIGHT #1 /* Triggers after states #: 4 even though they appear after this state */
~  Global("Alley_Face_SC","GLOBAL",0)
~ THEN BEGIN 0 // from:
  SAY #52613 /* ~Ты с трепетом наблюдаешь перед собой странную картину. То, что казалось обычной неприметной кирпичной стеной, теперь пульсирует и сокращается. Стена выгибается с необычайной пластикой, вздымаясь так, будто какая-то неведомая сила пытается прорваться сквозь преграду с той стороны. Постепенно волнующаяся масса начинает успокаиваться, ее изгибы становятся все более отчетливыми, и ты обнаруживаешь, что на уровне твоих глаз образуется грубое каменное подобие человеческого лица.~ */
  IF ~  NearbyDialog("DAnnah")
~ THEN REPLY #52645 /* ~«Что это?»~ */ DO ~SetGlobal("Alley_Face_SC","GLOBAL",1)
~ EXTERN ~DANNAH~ 256
  IF ~  !NearbyDialog("DAnnah")
~ THEN REPLY #52646 /* ~Подождать и посмотреть, что случится дальше.~ */ DO ~SetGlobal("Alley_Face_SC","GLOBAL",1)
~ GOTO 1
  IF ~  !NearbyDialog("DAnnah")
~ THEN REPLY #52647 /* ~Не обращать на лицо внимания и уйти.~ */ DO ~SetGlobal("Alley_Face_SC","GLOBAL",1)
~ GOTO 1
END

IF ~~ THEN BEGIN 1 // from: 0.1 0.2
  SAY #52614 /* ~Внезапно тебя овевает мощным порывом ветра, и воздух вокруг заполняется зловещим вздохами. Ветер усиливается, и ты начинаешь различать другие звуки: скрип досок, хруст листьев и скрежет камня о камень. Спустя пару секунд шум перестает быть разноголосой какофонией и начинает сливаться в один членораздельный звук. Ты различаешь тихий голос. Кажется, будто он исходит сразу отовсюду. «ТЫ? НЕ МОЖЕТ БЫТЬ».~ */
  IF ~~ THEN REPLY #52648 /* ~«Приветствую».~ */ GOTO 2
  IF ~~ THEN REPLY #52649 /* ~«Что?»~ */ GOTO 2
  IF ~~ THEN REPLY #52650 /* ~«Ты меня знаешь?»~ */ GOTO 2
  IF ~~ THEN REPLY #52651 /* ~«Ты, должно быть, с кем-то меня путаешь. Прощай».~ */ GOTO 2
END

IF ~~ THEN BEGIN 2 // from: 1.0 1.1 1.2 1.3
  SAY #52615 /* ~Ветер вокруг тебя стихает, но голос каким-то образом остается. «ТЫ СНОВА ВОЗРОДИЛСЯ? Я ВИДЕЛА ТВОЮ ГИБЕЛЬ».~ */
  IF ~~ THEN REPLY #52652 /* ~«Мою гибель? Где?»~ */ GOTO 6
  IF ~~ THEN REPLY #52653 /* ~«Кто ты?»~ */ GOTO 3
  IF ~~ THEN REPLY #52654 /* ~«Что ты такое?»~ */ GOTO 4
  IF ~~ THEN REPLY #52655 /* ~«Где я?»~ */ GOTO 5
END

IF ~~ THEN BEGIN 3 // from: 2.1 4.0 5.0
  SAY #52616 /* ~«Я — ЭТО Я». Голос такой же невыразительный, как и каменное лицо перед тобой.~ */
  IF ~~ THEN REPLY #52656 /* ~«Что ты такое?»~ */ GOTO 4
  IF ~~ THEN REPLY #52657 /* ~«Где я?»~ */ GOTO 5
  IF ~~ THEN REPLY #52658 /* ~«Ты сказала, что видела мою гибель? Где?»~ */ GOTO 6
END

IF WEIGHT #0 ~  False()
~ THEN BEGIN 4 // from: 2.2 3.0 5.1
  SAY #52617 /* ~«Я — ЭТО Я». Голос такой же невыразительный, как и каменное лицо перед тобой.~ */
  IF ~~ THEN REPLY #52659 /* ~«Кто ты?»~ */ GOTO 3
  IF ~~ THEN REPLY #52660 /* ~«Где я?»~ */ GOTO 5
  IF ~~ THEN REPLY #52661 /* ~«Ты сказала, что видела мою гибель? Где?»~ */ GOTO 6
END

IF ~~ THEN BEGIN 5 // from: 2.3 3.1 4.1
  SAY #52618 /* ~«ТЫ СТОИШЬ НА МНЕ, ВО МНЕ. КАМНИ, ИЗВЕСТЬ, ВОЗДУХ... ЭТО ВСЕ Я».~ */
  IF ~~ THEN REPLY #52662 /* ~«Кто ты?»~ */ GOTO 3
  IF ~~ THEN REPLY #52663 /* ~«Что ты такое?»~ */ GOTO 4
  IF ~~ THEN REPLY #52664 /* ~«Ты сказала, что видела мою гибель? Где?»~ */ GOTO 6
END

IF ~~ THEN BEGIN 6 // from: 2.0 3.2 4.2 5.2
  SAY #52619 /* ~«Я ВИДЕЛА ТВОЮ ГИБЕЛЬ ЗДЕСЬ. Я ВИДЕЛА ВСЕ ЭТО В СЕБЕ».~ */
  IF ~~ THEN REPLY #52665 /* ~«Ты знаешь, что со мной случилось?»~ */ GOTO 7
END

IF ~~ THEN BEGIN 7 // from: 6.0
  SAY #52620 /* ~«ТВАРИ, НЕ ОТБРАСЫВАЮЩИЕ ТЕНЕЙ... ТЕНИ. ОНИ ОКРУЖИЛИ ТЕБЯ. ПОВЕРГЛИ ТЕБЯ. ТЫ НЕ ПОМНИШЬ?» Ты сосредотачиваешься на странном голосе, состоящем из окружающих звуков. Где-то в отдаленных уголках твоего разума появляется короткий проблеск воспоминания. Тебе кажется, будто в этих звуках есть нечто смутно знакомое.~ */
  IF ~~ THEN REPLY #52719 /* ~Закрыть глаза и попытаться вспомнить.~ */ DO ~StartCutSceneEx("0405cut8",FALSE)
~ EXIT
END

IF WEIGHT #2 ~  Global("Alley_Face_SC","GLOBAL",1)
Global("Pregnant_Quest","GLOBAL",0)
~ THEN BEGIN 8 // from:
  SAY #52621 /* ~«ДА... ТЫ ПОМНИШЬ, — голос улицы звенит в твоих ушах, развеивая образы в голове и возвращая тебя в реальность. — ПОГИБШИЙ. И Я СКОРО СТАНУ ТАКОЙ. Я БОЛЬШЕ НЕ МОГУ ОТКЛАДЫВАТЬ РАЗДЕЛЕНИЕ. ДАВЛЕНИЕ НАРАСТАЕТ. СКОРО КАМНИ РАСКОЛЮТСЯ, И ЛЕТАЮЩИЕ УНИЧТОЖАТ МЕНЯ СВОИМ РЕМОНТОМ».~ */
  IF ~  CheckStatLT(Protagonist,13,INT)
~ THEN REPLY #52667 /* ~«Я не понимаю».~ */ GOTO 9
  IF ~  CheckStatGT(Protagonist,12,INT)
~ THEN REPLY #52668 /* ~«Ты умираешь?»~ */ GOTO 9
  IF ~  NearbyDialog("DAnnah")
~ THEN REPLY #52669 /* ~«Летающие?»~ */ EXTERN ~DANNAH~ 257
END

IF ~~ THEN BEGIN 9 // from: 8.0 8.1
  SAY #52622 /* ~«ДАВЛЕНИЕ НАРАСТАЕТ. СЛИШКОМ МНОГО ВСЕГО ВНУТРИ. НЕ ХВАТАЕТ МЕСТА. НУЖНО РАЗДЕЛИТЬСЯ».~ */
  IF ~  NearbyDialog("DAnnah")
~ THEN REPLY #52670 /* ~«Разделиться?»~ */ EXTERN ~DANNAH~ 258
  IF ~  !NearbyDialog("DAnnah")
~ THEN REPLY #52671 /* ~«Разделиться?»~ */ GOTO 10
END

IF ~~ THEN BEGIN 10 // from: 9.1
  SAY #52623 /* ~Голос продолжает: «ПОМОГИ МНЕ РАЗДЕЛИТЬСЯ. РАЗВЕТВИТЬСЯ. РАСШИРИТЬСЯ. ОТКРОЮТСЯ НОВЫЕ ПРОХОДЫ. ТЫ СМОЖЕШЬ ВОСПОЛЬЗОВАТЬСЯ ИМИ, ЧТОБЫ ДОБРАТЬСЯ ДО НИЖНЕГО РАЙОНА».~ */
  IF ~  Global("Dabus_Trap","GLOBAL",0)
!Dead("ADabus")
~ THEN REPLY #52672 /* ~«Что тебе нужно, чтобы разделиться?»~ */ GOTO 11
  IF ~  Global("Dabus_Trap","GLOBAL",2)
!Dead("ADabus")
~ THEN REPLY #52673 /* ~«Что тебе нужно, чтобы разделиться?»~ */ GOTO 13
  IF ~  Dead("ADabus")
~ THEN REPLY #52674 /* ~«Что тебе нужно, чтобы разделиться?»~ */ GOTO 14
END

IF ~~ THEN BEGIN 11 // from: 10.0
  SAY #52624 /* ~«ВО МНЕ ЛЕТАЮЩИЙ. ЧИНИТ. НЕ ДАЕТ МНЕ РАЗДЕЛИТЬСЯ. Я ЛОМАЮ ТО, ЧТО ОН ЧИНИТ. НО ОН СНОВА И СНОВА ВОЗВРАЩАЕТСЯ. ЗАНОВО ЧИНИТ. НУЖНО УБРАТЬ ЛЕТАЮЩЕГО».~ */
  IF ~~ THEN REPLY #52675 /* ~«Ты хочешь, чтобы я *убил* дабуса?»~ */ GOTO 12
END

IF ~~ THEN BEGIN 12 // from: 11.0
  SAY #52625 /* ~«УСТРАНИ ЕГО. ТОЛЬКО ТОГДА Я СМОГУ РАЗДЕЛИТЬСЯ».~ */
  IF ~~ THEN REPLY #52676 /* ~«Хорошо, я *избавлю* тебя от дабуса».~ */ DO ~SetGlobal("Pregnant_Quest","GLOBAL",1)
~ JOURNAL #52683 /* ~Я обнаружил, что на улице Протяжных вздохов нет никаких призраков — она живая. Она говорила со мной, и насколько я понял, она беременна, и чтобы родить, ей нужна моя помощь. Очевидно, дабус своим бесконечным ремонтом не дает улице разделиться. Я согласился найти способ от него избавиться. В обмен улица пообещала открыть проход в Нижний район.~ */ EXIT
END

IF ~~ THEN BEGIN 13 // from: 10.1
  SAY #52626 /* ~«ВО МНЕ БОЛЬШЕ НЕТ ЛЕТАЮЩЕГО. ОН БОЛЬШЕ НЕ ЧИНИТ. БОЛЬШЕ НЕ МЕШАЕТ».~ */
  IF ~~ THEN REPLY #52687 /* ~«Того дабуса? Да, я рассказал ему о мертвом дабусе, которого я обнаружил, и он отправился осмотреться».~ */ DO ~AddexperienceParty(15000)
~ JOURNAL #52682 /* ~Я обнаружил, что на улице Протяжных вздохов нет никаких призраков — она живая. Она говорила со мной, и насколько я понял, она беременна, и чтобы родить, ей нужна моя помощь. Очевидно, дабус, которому я рассказал о его мертвом приятеле, своим ремонтом не давал улице разделиться. Когда он отправился осмотреть тело, улица заточила его в доме с мертвым дабусом.~ */ GOTO 21
END

IF ~~ THEN BEGIN 14 // from: 10.2
  SAY #52627 /* ~«ЛЕТАЮЩИЙ УНИЧТОЖЕН. ОН БОЛЬШЕ НЕ ЧИНИТ. БОЛЬШЕ НЕ МЕШАЕТ».~ */
  IF ~~ THEN REPLY #52692 /* ~«Того дабуса? Да, его больше нет... Я его убил».~ */ DO ~AddexperienceParty(1500)
~ JOURNAL #52681 /* ~Я обнаружил, что на улице Протяжных вздохов нет никаких призраков — она живая. Она говорила со мной, и насколько я понял, она беременна, и чтобы родить, ей нужна моя помощь. Очевидно, дабус, которого я убил, своим ремонтом не давал улице разделиться.~ */ GOTO 18
END

IF WEIGHT #3 ~  Global("Alley_Face_SC","GLOBAL",1)
GlobalGT("Pregnant_Quest","GLOBAL",0)
~ THEN BEGIN 15 // from:
  SAY #52628 /* ~Когда ты подходишь к каменному лицу, в твои уши снова врывается гомон улицы, и сквозь него слышится голос: «ТЫ ВЕРНУЛСЯ».~ */
  IF ~  Global("Pregnant_Quest","GLOBAL",1)
!Dead("ADabus")
GlobalLT("Dabus_Trap","GLOBAL",2)
~ THEN REPLY #52693 /* ~«Дабус не уходит... Я не могу от него избавиться».~ */ GOTO 16
  IF ~  Global("Pregnant_Quest","GLOBAL",1)
Dead("ADabus")
~ THEN REPLY #52694 /* ~«Я убил дабуса. Он больше не помешает».~ */ DO ~AddexperienceParty(1500)
~ GOTO 18
  IF ~  Global("Pregnant_Quest","GLOBAL",1)
!Dead("ADabus")
Global("Dabus_Trap","GLOBAL",2)
~ THEN REPLY #52695 /* ~«Я поговорил с дабусом. Я рассказал ему о его мертвом товарище, и он полетел осмотреть его».~ */ DO ~AddexperienceParty(11500)
~ JOURNAL #52680 /* ~Оказалось, что улица Протяжных вздохов не только живая, но и вполне способна за себя постоять. Похоже, что дабус, с которым я говорил, и в самом деле пошел обследовать дом, где я обнаружил мертвого дабуса. Как только он вошел, улица убрала выход из дома, заточив его внутри.~ */ GOTO 21
  IF ~  Global("Pregnant_Quest","GLOBAL",2)
Global("Alley_Puzzle_1","GLOBAL",0)
Global("Alley_Puzzle_2","GLOBAL",0)
~ THEN REPLY #52696 /* ~«Я еще не убрал исправления дабуса. Повтори, что мне делать».~ */ GOTO 22
  IF ~  Global("Pregnant_Quest","GLOBAL",2)
Global("Alley_Puzzle_1","GLOBAL",1)
Global("Alley_Puzzle_2","GLOBAL",0)
~ THEN REPLY #52697 /* ~«Я убрал исправления в одном из мест. Повтори, где мне искать другое место».~ */ GOTO 23
  IF ~  Global("Pregnant_Quest","GLOBAL",2)
Global("Alley_Puzzle_1","GLOBAL",0)
Global("Alley_Puzzle_2","GLOBAL",1)
~ THEN REPLY #52698 /* ~«Я убрал исправления в одном из мест. Повтори, где мне искать другое место».~ */ GOTO 23
  IF ~  Global("Pregnant_Quest","GLOBAL",2)
Global("Alley_Puzzle_1","GLOBAL",1)
Global("Alley_Puzzle_2","GLOBAL",1)
~ THEN REPLY #52699 /* ~«Я убрал исправления, как ты и просила».~ */ GOTO 24
  IF ~~ THEN REPLY #52700 /* ~«Неважно. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 16 // from: 15.0
  SAY #52629 /* ~«ОТ НЕГО НУЖНО ИЗБАВИТЬСЯ. ДОЛЖЕН БЫТЬ СПОСОБ. ЗАСТАВЬ ЕГО УЙТИ. ВРЕМЕНИ МАЛО. СКОРО МНЕ НУЖНО БУДЕТ РАЗДЕЛИТЬСЯ, ИНАЧЕ Я ПОГИБНУ».~ */
  IF ~~ THEN REPLY #52701 /* ~«Не волнуйся, я что-нибудь придумаю. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 17 // from:
  SAY #52630 /* ~«ЛЕТАЮЩИЙ УНИЧТОЖЕН. ОН БОЛЬШЕ НЕ ЧИНИТ. БОЛЬШЕ НЕ МЕШАЕТ».~ */
  IF ~~ THEN REPLY #52702 /* ~«Да, он больше не будет мешать... теперь ты можешь разделиться».~ */ DO ~AddexperienceParty(1500)
~ GOTO 18
END

IF ~~ THEN BEGIN 18 // from: 14.0 15.1 17.0
  SAY #52631 /* ~Голос улицы на миг умолкает, будто обдумывая твои слова. «НЕ СТОИЛО УБИВАТЬ ЛЕТАЮЩЕГО. ТЫ ПРИВЛЕКАЕШЬ К СЕБЕ ВНИМАНИЕ ШИПАСТОЙ. ОНА ПРИНОСИТ БОЛЬ».~ */
  IF ~~ THEN REPLY #52703 /* ~«Мне пришлось убить его... это был единственный способ остановить его ремонт».~ */ GOTO 19
  IF ~~ THEN REPLY #52704 /* ~«Что сделано, то сделано. Так или иначе, дабуса больше *нет*, и ты можешь начинать делиться».~ */ GOTO 19
  IF ~~ THEN REPLY #52705 /* ~«Слушай, ты же просила убрать его... я его и убрал. Теперь ты можешь разделиться, правильно?»~ */ DO ~IncrementGlobalOnceEx("GLOBALEvil_Alley_1","GLOBALGood",-1)
~ GOTO 19
END

IF ~~ THEN BEGIN 19 // from: 18.0 18.1 18.2 21.0
  SAY #52632 /* ~«ПО-ПРЕЖНЕМУ НЕ МОГУ РАЗДЕЛИТЬСЯ. СЛИШКОМ СЛАБА. НЕ МОГУ РАЗРУШИТЬ ИСПРАВЛЕНИЯ ЛЕТАЮЩЕГО. НУЖНО УБРАТЬ ИХ ПЕРЕД РАЗДЕЛЕНИЕМ. ТЫ ДОЛЖЕН РАЗРУШИТЬ ИСПРАВЛЕНИЯ ЛЕТАЮЩЕГО ДЛЯ МЕНЯ».~ */
  IF ~~ THEN REPLY #52706 /* ~«Ты хочешь, чтобы я разрушил то, что изменил дабус? Но как?»~ */ GOTO 20
  IF ~~ THEN REPLY #52707 /* ~«Как мне убрать исправления? Я же не плотник».~ */ GOTO 20
END

IF ~~ THEN BEGIN 20 // from: 19.0 19.1
  SAY #52633 /* ~«ИЩИ НА МНЕ ЧАСТИ, ИЗМЕНЕННЫЕ ЛЕТАЮЩИМ. УСТРАНИ ИЗМЕНЕНИЯ. УНИЧТОЖЬ ИСПРАВЛЕНИЯ. БУДЬ АККУРАТЕН. ТОЧЕН. ТОЛЬКО ТОГДА Я СМОГУ РАЗДЕЛИТЬСЯ».~ */
  IF ~~ THEN REPLY #52708 /* ~«Хорошо. Я найду способ, как убрать исправления. Наверное, мне понадобятся какие-нибудь инструменты... молотка и лома должно хватить».~ */ DO ~SetGlobal("Pregnant_Quest","GLOBAL",2)
~ JOURNAL #52679 /* ~Хотя мне и удалось избавиться от дабуса, проведенный им ремонт все еще не дает улице разделиться. Я согласился найти какой-нибудь способ убрать изменения. Похоже, улица вот-вот разродится, и в ее слабом состоянии она не в силах сделать это сама. Наверняка мне понадобятся кое-какие инструменты... молотка и лома должно хватить.~ */ EXIT
END

IF ~~ THEN BEGIN 21 // from: 13.0 15.2
  SAY #52634 /* ~«ДА. ЛЕТАЮЩИЙ БОЛЬШЕ НЕ ЧИНИТ. ТЕПЕРЬ ОН С ТЕМ, ДРУГИМ. Я ОКРУЖИЛА ЕГО СОБОЙ. ОН ОСТАНЕТСЯ ВО МНЕ НАВЕЧНО».~ */
  IF ~~ THEN REPLY #52709 /* ~«Понятно. Теперь, когда он в ловушке, ты можешь беспрепятственно разделиться, правильно?»~ */ GOTO 19
END

IF ~~ THEN BEGIN 22 // from: 15.3
  SAY #52635 /* ~«ДВА МЕСТА НА МНЕ. НУЖНО УСТРАНИТЬ ИЗМЕНЕНИЯ ЛЕТАЮЩЕГО. Я НЕ МОГУ СДЕЛАТЬ ЭТОГО САМА. НУЖНО БЕРЕЧЬ СИЛЫ ДЛЯ РАЗДЕЛЕНИЯ. ТЫ ДОЛЖЕН УБРАТЬ ИЗМЕНЕНИЯ СВОИМИ РУКАМИ».~ */
  IF ~~ THEN REPLY #52710 /* ~«Хорошо. Пойду, поищу изменения и устраню их».~ */ EXIT
END

IF ~~ THEN BEGIN 23 // from: 15.4 15.5
  SAY #52636 /* ~«ДВА МЕСТА НА МНЕ. ОДНО К ЗАПАДУ ОТ ДРУГОГО. ОДНО К ВОСТОКУ ОТ ДРУГОГО».~ */
  IF ~~ THEN REPLY #52711 /* ~«Понятнее некуда. Спасибо, что помогла».~ */ EXIT
END

IF ~~ THEN BEGIN 24 // from: 15.6
  SAY #52637 /* ~«ДА. ВСЕ В ПОРЯДКЕ. Я БЛАГОДАРНА». И вновь вокруг тебя начинает дуть ветер, на этот раз с невероятной силой. Вездесущие звуки улицы усиливаются настолько, что тихий шепот голоса уже еле пробивается сквозь шум. «ТЕПЕРЬ ТЫ ДОЛЖЕН УЙТИ. НАЧИНАЕТСЯ РАЗДЕЛЕНИЕ. ПУТЬ ДЛЯ ТЕБЯ ОТКРЫТ».~ */
  IF ~~ THEN REPLY #52712 /* ~«Тогда прощай».~ */ DO ~SetGlobal("Pregnant_Quest","GLOBAL",3)
AddexperienceParty(16250)
AddJournalEntry(106724,QUEST_DONE)
~ GOTO 25
END

IF ~~ THEN BEGIN 25 // from: 24.0
  SAY #52638 /* ~Каменное лицо перед тобой снова начинает меняться; ты наблюдаешь, как оно смещается и вздымается. Целая стена, казалось бы, растает перед тобой, открывая узкий проход. Внезапно земля под ногами начинает люто трястись, а слабое подвывание ветра перерастает в более настойчивые, почти человеческие стоны. Бросаясь в проход, ты слышишь вокруг себя грохот камней и треск досок.~ */
  IF ~~ THEN REPLY #52723 /* ~Уйти.~ */ DO ~StartMovie("Alybirth")
~ JOURNAL #52678 /* ~Мне удалось выполнить поручение беременной улицы. Как она и обещала, с рождением новой улицы образовался проход, так что я могу перебраться из Улья в Нижний район.~ */ EXIT
END
