// creator  : D:\Games\NearInfinity-exp\app\NearInfinity.jar (v2.4-20250303)
// game     : D:\Games\Steam\steamapps\common\Project P
// resource : DSHILAND.DLG
// source   : data\DLGFiles.bif
// dialog   : lang\ru_RU\dialog.tlk
// dialogF  : (none)

BEGIN ~DSHILAND~
//////////////////////////////////////////////////
// WARNING: this file contains non-trivial WEIGHTs
//////////////////////////////////////////////////

IF WEIGHT #5 /* Triggers after states #: 1 2 3 4 16 even though they appear after this state */
~  NumTimesTalkedTo(0)
~ THEN BEGIN 0 // from:
  SAY #45742 /* ~«Проклятие! На этот раз я почти-что сделала это. Разве ты не знаешь, что очень опасно прерывать заклинателей во время произношения заклинаний? Хорошо, что я просто тренировалась. Что тебе надо?»~ */
  IF ~  Global("FedEx","Global",3)
PartyHasItem("DBox")
~ THEN REPLY #45743 /* ~«Я хочу узнать побольше об этой шкатулке».~ */ GOTO 5
  IF ~~ THEN REPLY #45744 /* ~«Прошу прощения за беспокойство. Прощай».~ */ EXIT
END

IF WEIGHT #4 /* Triggers after states #: 2 3 4 16 even though they appear after this state */
~  NumTimesTalkedToGT(0)
~ THEN BEGIN 1 // from:
  SAY #45745 /* ~«Еще один обрыв! Теперь никто не может уединиться, даже в своем доме. Пожалуйста, уходи, пока я не позвала стражников... или нет, лучше я испробую мое новое заклинание на тебе». ~ */
  IF ~  Global("FedEx","Global",3)
PartyHasItem("DBox")
~ THEN REPLY #45748 /* ~«Я хочу узнать побольше об этой шкатулке».~ */ GOTO 5
  IF ~~ THEN REPLY #45749 /* ~«Прошу прощения за беспокойство. Прощай».~ */ EXIT
END

IF WEIGHT #3 /* Triggers after states #: 3 4 16 even though they appear after this state */
~  GlobalGT("FedEx","Global",3)
~ THEN BEGIN 2 // from:
  SAY #45750 /* ~«Ты уже и так отнял у меня много времени. Пожалуйста, уходи». ~ */
  IF ~~ THEN REPLY #45751 /* ~Уйти.~ */ EXIT
END

IF WEIGHT #2 /* Triggers after states #: 4 16 even though they appear after this state */
~  GlobalGT("Demonbox","Global",2)
~ THEN BEGIN 3 // from:
  SAY #45752 /* ~«По Улью ходят слухи, что ты убил нечистого, который был заключен в шкатулке Моридора. Ты случайно не оставил какие-нибудь его части?»~ */
  IF ~~ THEN REPLY #45753 /* ~«Кем ты являешься, раз собираешь подобные вещи?»~ */ GOTO 15
  IF ~~ THEN REPLY #45754 /* ~«Э... нет, не думал об этом». ~ */ GOTO 15
END

IF WEIGHT #1 /* Triggers after states #: 16 even though they appear after this state */
~  GlobalGT("FedEx","Global",9)
~ THEN BEGIN 4 // from:
  SAY #45755 /* ~«Ходят слухи, что тебе удалось уничтожить шкатулку Моридора. Позволь мне тебя поздравить с этим. Но все же очень жаль, что я не сумела разгадать все заклинания, которые были использованы для заключения нечистого духа».~ */
  IF ~~ THEN REPLY #45756 /* ~«Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 5 // from: 0.0 1.0
  SAY #45757 /* ~Ты протягиваешь Шиландре шкатулку Моридора. «Ах да! Я хорошо помню эту шкатулку. Она однажды была моей. Что ты хочешь знать о ней?»~ */
  IF ~  Global("Q1","Global",0)
~ THEN REPLY #45758 /* ~«Кто тебе ее дал?»~ */ DO ~SetGlobal("Q1","Global",1)
~ GOTO 7
  IF ~  Global("Q2","Global",0)
~ THEN REPLY #45759 /* ~«Похоже, ты разбираешься в магии. Можешь сказать, что за заклинания наложены на эту шкатулку?»~ */ DO ~SetGlobal("Q2","Global",1)
~ GOTO 8
  IF ~  Global("Q4","Global",0)
~ THEN REPLY #45760 /* ~«Ты знаешь историю этой шкатулки?»~ */ DO ~SetGlobal("Q4","Global",1)
~ GOTO 13
END

IF ~~ THEN BEGIN 6 // from: 7.1 9.0 10.0 11.1 12.0 13.0
  SAY #45761 /* ~«Что ты еще хочешь узнать?»~ */
  IF ~  Global("Q1","Global",0)
~ THEN REPLY #45762 /* ~«Где ты ее нашла?»~ */ DO ~SetGlobal("Q1","Global",1)
~ GOTO 7
  IF ~  Global("Q2","Global",0)
~ THEN REPLY #45763 /* ~«Похоже, ты разбираешься в магии. Можешь сказать, что за заклинания наложены на эту шкатулку?»~ */ DO ~SetGlobal("Q2","Global",1)
~ GOTO 8
  IF ~  Global("Q3","Global",0)
Global("Q2","Global",1)
~ THEN REPLY #45764 /* ~«Ты можешь снять заклинания с этой шкатулки?»~ */ DO ~SetGlobal("Q3","Global",1)
~ GOTO 10
  IF ~  Global("Q4","Global",0)
~ THEN REPLY #45765 /* ~«Ты знаешь историю этой шкатулки?»~ */ DO ~SetGlobal("Q4","Global",1)
~ GOTO 13
  IF ~  Global("Q1","Global",1)
Global("Q2","Global",1)
Global("Q3","Global",1)
Global("Q4","Global",1)
~ THEN REPLY #45766 /* ~«Есть ли какой-нибудь способ избавиться от шкатулки Моридора, не причинив никому вреда?»~ */ GOTO 14
END

IF ~~ THEN BEGIN 7 // from: 5.0 6.0
  SAY #45767 /* ~«Хм-м... Дай подумать. Я не помню, у кого я ее взяла. Помню только, что пошла на рынок для каких-то ингредиентов для заклинаний, когда кто-то предложил мне эту шкатулку. Осмотрев ее, я обнаружила, что она проклята, но я была заинтригована заклинаниями, наложенными на нее, и решила купить ее любой ценой».~ */
  IF ~~ THEN REPLY #45768 /* ~«Если ты была так заинтригована этой шкатулкой, почему же ты решила от нее избавиться?»~ */ GOTO 11
  IF ~~ THEN REPLY #45769 /* ~«Я хотел бы задать другие вопросы...»~ */ GOTO 6
END

IF ~~ THEN BEGIN 8 // from: 5.1 6.1
  SAY #45770 /* ~«Несколько лет я изучала шкатулку, пытаясь постичь ее секреты. На нее было наложено заклятие, на которое было наложено еще одно, а на него, в свою очередь, — третье. К моему удивлению, мои исследования показали, что все они являются заклинаниями для заточения нечисти».~ */
  IF ~~ THEN REPLY #45771 /* ~«Нечисти? То есть, ты имеешь в виду, что в этой шкатулке заключены демоны?..»~ */ GOTO 9
END

IF ~~ THEN BEGIN 9 // from: 8.0
  SAY #45772 /* ~«Нет! Не нечисти. Одного нечистого духа. И, судя по сложности и силе этих заклинаний, он является одним из самых сильных и значимых демонов в своем мире».~ */
  IF ~~ THEN REPLY #45773 /* ~«Я хотел бы задать другие вопросы...»~ */ GOTO 6
END

IF ~~ THEN BEGIN 10 // from: 6.2
  SAY #45774 /* ~«Значит, хочешь отделаться от этой шкатулки? Это заклинание — самое наихудшее из всех. Проще говоря, данное заклинание высасывает энергию из текущего владельца шкатулки и использует ее для подпитки одного из заклинаний заточения. Но это еще не самое худшее. Нечистый внутри способен чуять эту энергию и, скорее всего, выбравшись, будет охотиться на владельца. Владелец шкатулки всегда в проигрыше. Либо она высосет из тебя всю энергию, либо нечистый, сидящий внутри, убьет тебя».~ */
  IF ~~ THEN REPLY #45775 /* ~«Понятно. Не против, если я задам тебе еще несколько вопросов...»~ */ GOTO 6
END

IF ~~ THEN BEGIN 11 // from: 7.0
  SAY #45776 /* ~«Я была молодой и к тому же искала приключения на свою голову. Со своей ненасытной жаждой знаний я неосмотрительно сняла одно из заклинаний. Пристально осмотрев шкатулку еще раз, я поняла, что она теперь совершенно другая. Признаки разложения свидетельствовали о том, что заклинания слабеют. Я поняла, что если буду хранить эту шкатулку у себя, то окажусь в большой опасности. Поэтому, чтобы избавиться от нее, я объявила соревнование».~ */
  IF ~~ THEN REPLY #45777 /* ~«Соревнование?»~ */ GOTO 12
  IF ~~ THEN REPLY #45778 /* ~«Я хотел бы задать другие вопросы...»~ */ GOTO 6
END

IF ~~ THEN BEGIN 12 // from: 11.0
  SAY #45779 /* ~«Это был самый целесообразный способ отделаться от нее. Я просто созвала всех громил с Улья состязаться между собой, чтобы определить, кто из них самый лучший. У вояк ведь обычно большие мускулы, а вот с котелком не все так гладко, если ты понимаешь, о чем я. Вот они и налетели, как мухи на мед. Я предложила немного денег и шкатулку в качестве приза. Если не ошибаюсь, тогда в этом соревновании победил какой-то громила по имени Браскен».~ */
  IF ~~ THEN REPLY #45780 /* ~«Я хотел бы задать другие вопросы...»~ */ GOTO 6
END

IF ~~ THEN BEGIN 13 // from: 5.2 6.3
  SAY #45781 /* ~«Единственное, что мне удалось узнать, — это ее имя. Шкатулка Моридора. Кто такой Моридор и откуда появилась эта шкатулка — мне неизвестно».~ */
  IF ~~ THEN REPLY #45782 /* ~«Я хотел бы задать другие вопросы...»~ */ GOTO 6
END

IF ~~ THEN BEGIN 14 // from: 6.4
  SAY #45783 /* ~«Я недостаточно сильна для того, чтобы сразиться с подобным существом или изгнать его. Давно это было, но раньше посреди переулка Опасных углов стоял собор. Тебе может помочь жрец или кто-нибудь, способный черпать свою силу из более высокого источника».~ */
  IF ~~ THEN REPLY #45784 /* ~«Ты мне очень помогла. Спасибо».~ */ DO ~SetGlobal("FedEx","Global",4)
SetGlobal("Delta","Global",2)
SetGlobal("Epsilon","Global",1)
AddexperienceParty(250)
~ JOURNAL #60388 /* ~Шиландра рассказала мне многое о шкатулке Моридора... даже то, что я не хотел бы слышать. Похоже, эта шкатулка содержит могущественного, по сравнению со своими сородичами, нечистого духа. И что еще хуже, заклинания, удерживающие его внутри, ослабевают. Боюсь, что скоро он сможет выбраться и потребовать возмездия за свое заточение. Шиландра посоветовала мне посетить собор, расположенный посреди переулка Опасных углов. Есть надежда, что более могущественный источник силы сможет вмешаться и изгнать демона до того, как тот сможет сбежать.~ */ EXIT
END

IF ~~ THEN BEGIN 15 // from: 3.0 3.1
  SAY #45785 /* ~«Боюсь, что непосвященным в искусство магии это недоступно. Некоторые части очень ценны в качестве ингредиентов для создания заклинаний. Прошу прощения, но мне нужно попрактиковаться с этим заклинанием еще немного».~ */
  IF ~~ THEN REPLY #45786 /* ~«Прощай».~ */ DO ~SetGlobal("Shil","Global",1)
~ EXIT
END

IF WEIGHT #0 ~  Global("Shil","Global",1)
~ THEN BEGIN 16 // from:
  SAY #45787 /* ~«Мне нечего больше сказать тебе».~ */
  IF ~~ THEN REPLY #45788 /* ~«Прощай».~ */ EXIT
END
