// creator  : D:\Games\NearInfinity-exp\app\NearInfinity.jar (v2.4-20250303)
// game     : D:\Games\Steam\steamapps\common\Project P
// resource : DTBARSE.DLG
// source   : data\DLGFiles.bif
// dialog   : lang\ru_RU\dialog.tlk
// dialogF  : (none)

BEGIN ~DTBARSE~
//////////////////////////////////////////////////
// WARNING: this file contains non-trivial WEIGHTs
//////////////////////////////////////////////////

IF WEIGHT #0 ~  NumTimesTalkedTo(0)
Global("Slavers","GLOBAL",0)
~ THEN BEGIN 0 // from:
  SAY #48096 /* ~Перед тобой мрачный худощавый мужчина. Его лицо выветрено и покрыто морщинами, с покрасневшими глазами. Завидев тебя, он выпрямляется. «Добро пожаловать в Ворота предателей. Я — Гниющий Копчик, хозяин таверны».~ */
  IF ~~ THEN REPLY #48097 /* ~«Что-то не так?»~ */ GOTO 1
  IF ~~ THEN REPLY #48098 /* ~«Что это за имя такое?»~ */ GOTO 2
  IF ~~ THEN REPLY #48101 /* ~«Чем торгуешь?»~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~~ THEN REPLY #48107 /* ~«Мне нужно место для отдыха».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~~ THEN REPLY #48108 /* ~«Рад за тебя. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
END

IF ~~ THEN BEGIN 1 // from: 0.0 2.0
  SAY #48109 /* ~«Наверно, то, что мою дочь выкрали работорговцы, и теперь это место закроют за долги, и мне придется его уступить одному из уродов-богачей из первого круга». Он присматривается к тебе тщательнее. «Ты ведь тот парень, который вынюхивает насчет дэва, так? Вот что. Ты поможешь мне — я помогу тебе».~ */
  IF ~~ THEN REPLY #48110 /* ~«Что ты знаешь о дэва?»~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 3
  IF ~~ THEN REPLY #48111 /* ~«Что мне нужно сделать?»~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 5
  IF ~~ THEN REPLY #48112 /* ~«Поговорим об этом позднее. Сейчас у меня есть другие вопросы...»~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 4
  IF ~~ THEN REPLY #48113 /* ~«Дай подумать над этим. Я к тебе еще вернусь. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
END

IF ~~ THEN BEGIN 2 // from: 0.1
  SAY #48114 /* ~Он смотрит на тебя. «Копчиком меня назвали при рождении, пень. А Гниющего я получил из-за того, что кое-кто из моих бывших друзей распускал про меня всякие вздорные слухи». Похоже, он *очень* зол. «Что тебе нужно, черт тебя побери? Ты приключенец или типа того?»~ */
  IF ~~ THEN REPLY #48116 /* ~«А что? Что-то не так?»~ */ GOTO 1
  IF ~~ THEN REPLY #48117 /* ~«Я хотел бы задать пару вопросов...»~ */ GOTO 4
  IF ~~ THEN REPLY #48118 /* ~«Чем торгуешь?»~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~~ THEN REPLY #48119 /* ~«Мне нужно место для отдыха».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~~ THEN REPLY #48120 /* ~«Рад за тебя. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
END

IF ~~ THEN BEGIN 3 // from: 1.0 4.4 7.1
  SAY #48125 /* ~Он хитро улыбается. «Ты ведь ищешь его, верно? Могу тебе сообщить, что он спрятан глубоко под тюрьмой. Еще могу рассказать, как туда попасть, исключая варианты быть арестованным или подкупить кого-нибудь — они все равно не сработают».~ */
  IF ~~ THEN REPLY #48127 /* ~«Что мне нужно для этого сделать?»~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 5
END

IF ~~ THEN BEGIN 4 // from: 1.2 2.1 5.0 7.3 8.0 12.0 13.0 14.1
  SAY #48128 /* ~«Чего ты хочешь узнать?»~ */
  IF ~  Global("Know_Plague","GLOBAL",1)
~ THEN REPLY #48129 /* ~«Почему город выглядит таким покинутым?»~ */ JOURNAL #47843 /* ~Гниющий Копчик, владелец таверны «Ворота предателей», сообщил мне, что отцы города при расширении тюрьмы обнаружили в подземелье заключенного в каменный пузырь дэва. Они его, естественно, не освободили, только забрали у него меч и им наводили порядок в камерах заключенных.~ */ GOTO 7
  IF ~  Global("Know_Plague","GLOBAL",0)
~ THEN REPLY #48130 /* ~«Почему город выглядит таким покинутым?»~ */ DO ~SetGlobal("Know_Plague","GLOBAL",1)
~ JOURNAL #47843 /* ~Гниющий Копчик, владелец таверны «Ворота предателей», сообщил мне, что отцы города при расширении тюрьмы обнаружили в подземелье заключенного в каменный пузырь дэва. Они его, естественно, не освободили, только забрали у него меч и им наводили порядок в камерах заключенных.~ */ GOTO 7
  IF ~~ THEN REPLY #48131 /* ~«Что ты можешь рассказать об этом месте?»~ */ GOTO 8
  IF ~  Global("Slavers","GLOBAL",1)
Global("Curst_Key","GLOBAL",0)
~ THEN REPLY #48132 /* ~«Ты что-то говорил насчет того, что тебе нужна помощь. Что ты хочешь, чтобы я сделал?»~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 5
  IF ~~ THEN REPLY #48133 /* ~«Что ты знаешь о дэва?»~ */ GOTO 3
  IF ~  Global("Slavers","GLOBAL",1)
~ THEN REPLY #48134 /* ~«Чем торгуешь?»~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~  Global("Slavers","GLOBAL",0)
~ THEN REPLY #48135 /* ~«Пожалуй, ничего. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~  Global("Slavers","GLOBAL",1)
~ THEN REPLY #48135 /* ~«Пожалуй, ничего. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 5 // from: 1.1 3.0 4.3 6.0
  SAY #48136 /* ~«Иди, поговори с Маркесом. Он бывший член Гармониума. Он знает тех работорговцев, и у него есть первая часть ключа, который откроет тебе дорогу к дэва. Всего частей пять, но этот ключ — ненастоящая вещь. Когда соберешь их всех, скажи мне — и ты получишь мои знания. А пока это останется тайной. Тебе придется выполнить просьбы всех держателей ключа».~ */
  IF ~~ THEN REPLY #48137 /* ~«Дай подумать над этим. У меня есть другие вопросы».~ */ DO ~SetGlobal("Curst_Key","GLOBAL",1)
~ JOURNAL #68074 /* ~Гниющий Копчик попросил меня спасти его дочь от работорговцев. Он сказал, чтобы я переговорил с Маркесом, офицером Гармониума, который находится в его таверне.~ */ GOTO 4
  IF ~~ THEN REPLY #48138 /* ~«Я не буду этого делать».~ */ DO ~SetGlobal("Slavers","GLOBAL",6)
~ JOURNAL #68074 /* ~Гниющий Копчик попросил меня спасти его дочь от работорговцев. Он сказал, чтобы я переговорил с Маркесом, офицером Гармониума, который находится в его таверне.~ */ GOTO 9
  IF ~~ THEN REPLY #48139 /* ~«Я сделаю это».~ */ GOTO 10
END

IF ~~ THEN BEGIN 6 // from: 0.2 0.3 0.4 1.3 2.2 2.3 2.4 4.6 7.4 8.1 12.1 13.1
  SAY #48140 /* ~«Послушай... Черт побери! Ненавижу просить у незнакомцев, но мне кажется, что я смогу помочь тебе, если ты поможешь мне». Он спешно продолжает: «Мою дочь похитили, ее собираются продать, а без ее помощи я потеряю это место. У меня есть информация, которая может тебе весьма пригодиться. Ты почешешь мне спинку, я почешу тебе, понимаешь?»~ */
  IF ~~ THEN REPLY #48141 /* ~«Что тебе нужно?»~ */ DO ~SetGlobal("Curst_Key","GLOBAL",1)
~ JOURNAL #68074 /* ~Гниющий Копчик попросил меня спасти его дочь от работорговцев. Он сказал, чтобы я переговорил с Маркесом, офицером Гармониума, который находится в его таверне.~ */ GOTO 5
  IF ~~ THEN REPLY #48142 /* ~«Забудь. Сейчас я очень занят».~ */ DO ~SetGlobal("Slavers","GLOBAL",6)
~ GOTO 9
END

IF ~~ THEN BEGIN 7 // from: 4.0 4.1
  SAY #48143 /* ~«Ха. Как всегда, проблем в изобилии. Во-первых, для расширения тюрьмы роют норы, и вот в одной из них находят этого дэва, заключенного в огромный обсидиановый пузырь и прикованного к полу. Они забрали его меч для того, чтобы держать преступников в своих клетках. И теперь обсуждают, что делать с этим небожителем, все волосы на себе изорвали, пытаясь понять, какую можно пользу получить из этой находки и навариться на 'дружках'... а тут еще чума вспыхнула».~ */
  IF ~~ THEN REPLY #48144 /* ~«Чума?»~ */ JOURNAL #48160 /* ~Гниющий Копчик сказал мне, что Проклятый был поражен чумой незадолго после того, как официальные лица открыли тюрьму с дэва.~ */ GOTO 12
  IF ~~ THEN REPLY #48145 /* ~«Что ты знаешь о дэва?»~ */ GOTO 3
  IF ~~ THEN REPLY #48146 /* ~«Почему дэва заточили?»~ */ GOTO 13
  IF ~~ THEN REPLY #48147 /* ~«У меня есть другие вопросы...»~ */ GOTO 4
  IF ~  Global("Slavers","GLOBAL",0)
~ THEN REPLY #48148 /* ~«Спасибо. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~  Global("Slavers","GLOBAL",1)
~ THEN REPLY #48159 /* ~«Спасибо. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 8 // from: 4.2
  SAY #48161 /* ~«Рассадник слухов и кривотолков, вот что это за место. Никто никому не верит. Никто не сделает другому одолжения, если только не будет уверен, что тот останется у него в долгу. Все ненавидят друг друга и пытаются облапошить других. Например, такого как ты... Ты — готовая жертва, потому что не знаешь правил. Зуб даю, что тебя кинут».~ */
  IF ~~ THEN REPLY #48162 /* ~«У меня есть еще несколько вопросов...»~ */ GOTO 4
  IF ~  Global("Slavers","GLOBAL",0)
~ THEN REPLY #48163 /* ~«Спасибо. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~  Global("Slavers","GLOBAL",1)
~ THEN REPLY #48164 /* ~«Спасибо. Прощай».~ */ EXIT
END

IF WEIGHT #6 /* Triggers after states #: 21 18 19 17 15 even though they appear after this state */
~  NumTimesTalkedToGT(0)
Global("Slavers","GLOBAL",6)
~ THEN BEGIN 9 // from: 5.1 6.1 14.0
  SAY #48165 /* ~«Не будешь мне помогать — от меня тоже ничего не дождешься. Вон из моего заведения».~ */
  IF ~~ THEN REPLY #48166 /* ~«Нет. Чем ты здесь торгуешь??»~ */ GOTO 11
  IF ~~ THEN REPLY #48167 /* ~«Нет. Мне нужно место для отдыха».~ */ GOTO 11
  IF ~~ THEN REPLY #48168 /* ~«Я передумал. Я помогу тебе».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 10
  IF ~~ THEN REPLY #48169 /* ~«Тогда я ухожу. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 10 // from: 5.2 9.2
  SAY #48170 /* ~«Маркес скажет тебе, что нужно делать, а когда закончишь с этим делом, он укажет тебе на другого владельца ключа».~ */
  IF ~~ THEN REPLY #48171 /* ~«Прощай».~ */ DO ~SetGlobal("Curst_Key","GLOBAL",1)
~ JOURNAL #68074 /* ~Гниющий Копчик попросил меня спасти его дочь от работорговцев. Он сказал, чтобы я переговорил с Маркесом, офицером Гармониума, который находится в его таверне.~ */ EXIT
END

IF ~~ THEN BEGIN 11 // from: 9.0 9.1
  SAY #48172 /* ~«Только если ты меня убьешь — но тогда все дороги в этом городе для тебя закрыты. Ты сгниешь тут заживо, пень. Я не шучу. Ты не сможешь отсюда выбраться».~ */
  IF ~~ THEN REPLY #48173 /* ~Все равно убить его.~ */ DO ~Enemy()
Attack(Protagonist)
ForceAttack(Protagonist,Myself)
~ EXIT
  IF ~~ THEN REPLY #48174 /* ~Уйти.~ */ EXIT
END

IF ~~ THEN BEGIN 12 // from: 7.0
  SAY #48175 /* ~«Все верно. Что-то косит народ наповал. Делает людей озлобленными и раздражительными, но слишком слабыми, чтобы что-нибудь с этим сделать. Стража перекрыла части города и теперь сидит как на иголках. Они могут упрятать тебя в тюрьму по любому предлогу. Не знаю, как ты сумел попасть в город, но выбраться из него ты сможешь только через портал».~ */
  IF ~~ THEN REPLY #48176 /* ~«У меня есть еще несколько вопросов...»~ */ GOTO 4
  IF ~  Global("Slavers","GLOBAL",0)
~ THEN REPLY #48177 /* ~«Спасибо. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~  Global("Slavers","GLOBAL",1)
~ THEN REPLY #48178 /* ~«Спасибо. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 13 // from: 7.2
  SAY #48179 /* ~Он пристально смотрит на тебя, пытаясь выяснить, не шутишь ли ты с ним. «Я ведь сказал, что они нашли его зарытым в землю, ведь так? Это значит, что я понятия не имею, как он там внизу оказался. Жаль, что у меня нет власти сажать дэва в клетки. Это было бы как нельзя кстати».~ */
  IF ~~ THEN REPLY #48180 /* ~«Ладно, тогда ответь еще на пару вопросов».~ */ GOTO 4
  IF ~  Global("Slavers","GLOBAL",0)
~ THEN REPLY #48181 /* ~«Спасибо. Прощай».~ */ DO ~SetGlobal("Slavers","GLOBAL",1)
~ GOTO 6
  IF ~  Global("Slavers","GLOBAL",1)
~ THEN REPLY #48182 /* ~«Спасибо. Прощай».~ */ EXIT
END

IF WEIGHT #7 /* Triggers after states #: 21 18 19 17 15 even though they appear after this state */
~  GlobalGT("Slavers","GLOBAL",0)
GlobalLT("Slavers","GLOBAL",6)
~ THEN BEGIN 14 // from:
  SAY #48183 /* ~С едва скрываемым беспокойством в глазах он задает вопрос: «Накопал что-нибудь насчет моей дочери? Я очень за нее беспокоюсь. Пожалуйста, сообщи Маркесу, если что услышишь».~ */
  IF ~  Global("Slavers","GLOBAL",1)
~ THEN REPLY #48184 /* ~«Я не собираюсь ее искать».~ */ DO ~SetGlobal("Slavers","GLOBAL",6)
~ GOTO 9
  IF ~~ THEN REPLY #48185 /* ~«Пока нет. У меня есть несколько вопросов».~ */ GOTO 4
  IF ~~ THEN REPLY #48186 /* ~«Пока нет. Чем ты здесь торгуешь?»~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48187 /* ~«Пока нет. Мне нужно место для отдыха».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~  Global("Skatch_Dead_KAPUTZ","GLOBAL",1)
!Global("Jasilya_Dead_KAPUTZ","GLOBAL",1)
~ THEN REPLY #48188 /* ~«Да. Она скоро придет сюда. Пойду, переговорю с Маркесом. Прощай».~ */ EXIT
  IF ~  Global("Jasilya_Dead_KAPUTZ","GLOBAL",1)
~ THEN REPLY #66863 /* ~«Она погибла, когда я попытался спасти ее. Пойду, переговорю с Маркесом».~ */ DO ~SetGlobal("Slavers","GLOBAL",7)
~ EXIT
  IF ~~ THEN REPLY #66864 /* ~«Еще нет. Прощай».~ */ EXIT
END

IF WEIGHT #1 ~  NumTimesTalkedToGT(0)
Global("Slavers","GLOBAL",7)
GlobalGT("Curst_Key","GLOBAL",0)
GlobalLT("Curst_Key","GLOBAL",6)
~ THEN BEGIN 15 // from:
  SAY #48189 /* ~В его глазах видна горечь утраты. «Чего тебе надо, рубака?»~ */
  IF ~~ THEN REPLY #48190 /* ~«А что вообще такого в этом ключе?»~ */ GOTO 16
  IF ~~ THEN REPLY #48191 /* ~«Чем торгуешь?»~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48192 /* ~«Мне нужно место для отдыха».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48193 /* ~«Ничего. Прощай».~ */ EXIT
END

IF ~~ THEN BEGIN 16 // from: 15.0 17.0
  SAY #48194 /* ~«Это ключ, но он неосязаем, если ты понимаешь, о чем я. Когда ты соберешь все его части, скажи мне, он откроет в моем разуме нужные знания. А до тех пор они останутся в тайне. Тебе нужно выполнить просьбы владельцев ключей. Это все, что ты хотел?»~ */
  IF ~~ THEN REPLY #48195 /* ~«Чем торгуешь?»~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48196 /* ~«Мне нужно место для отдыха».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48197 /* ~«Да. Прощай».~ */ EXIT
END

IF WEIGHT #2 ~  NumTimesTalkedToGT(0)
GlobalGT("Curst_Key","GLOBAL",0)
GlobalLT("Curst_Key","GLOBAL",6)
Global("Slavers","GLOBAL",5)
~ THEN BEGIN 17 // from:
  SAY #48198 /* ~«Как продвигаются дела с ключом? Похоже, ты очень хочешь заполучить его. Уверен, ты его получишь».~ */
  IF ~~ THEN REPLY #48199 /* ~«А что вообще такого в этом ключе?»~ */ GOTO 16
  IF ~~ THEN REPLY #48200 /* ~«Чем торгуешь?»~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48201 /* ~«Мне нужно место для отдыха».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48202 /* ~«Ничего. Прощай».~ */ EXIT
END

IF WEIGHT #4 /* Triggers after states #: 19 even though they appear after this state */
~  Global("Curst_Key","GLOBAL",6)
GlobalGT("Slavers","GLOBAL",5)
Global("Chekka_Dead_KAPUTZ","GLOBAL",0)
~ THEN BEGIN 18 // from:
  SAY #48203 /* ~«Нужно сделать еще одно дельце. Видишь вон ту пьяную сволочь Чек-ка Плута? Убей его». Он повышает голос: «Эй, Чек-ка! Твоя смерть пришла!»~ */
  IF ~~ THEN EXTERN ~DCHEKKA~ 4
END

IF WEIGHT #3 ~  Global("Curst_Key","GLOBAL",6)
GlobalGT("Slavers","GLOBAL",5)
GlobalGT("Chekka_Dead_KAPUTZ","GLOBAL",0)
~ THEN BEGIN 19 // from:
  SAY #48204 /* ~«Теперь, когда ты убил того пьяницу, ворота можно отпереть. Ты готов? Как только ты войдешь, назад пути не будет: дверь будет закрыта, забаррикадирована и магически защищена».~ */
  IF ~~ THEN REPLY #48205 /* ~«Я готов».~ */ DO ~AddexperienceParty(175000)
TeleportParty("AR0708",[3947.2162],4)
~ EXIT
  IF ~~ THEN REPLY #48206 /* ~«Сперва я бы хотел отдохнуть в трактире».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48207 /* ~«Сначала я бы хотел взглянуть на твои товары».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48208 /* ~«Еще нет».~ */ GOTO 20
END

IF ~~ THEN BEGIN 20 // from: 19.3 21.3
  SAY #48209 /* ~«Тогда возвращайся, когда будешь готов».~ */
  IF ~~ THEN REPLY #48210 /* ~«Я так и сделаю. Прощай».~ */ EXIT
END

IF WEIGHT #5 ~  Global("Curst_Key","GLOBAL",6)
Global("Slavers","GLOBAL",5)
~ THEN BEGIN 21 // from:
  SAY #48211 /* ~«Ты готов? Как только ты войдешь, назад пути не будет: дверь будет закрыта, забаррикадирована и магически защищена».~ */
  IF ~~ THEN REPLY #48212 /* ~«Я готов».~ */ DO ~AddexperienceParty(175000)
TeleportParty("AR0708",[3947.2162],4)
~ EXIT
  IF ~~ THEN REPLY #48213 /* ~«Сперва я бы хотел отдохнуть в трактире».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48214 /* ~«Сначала я бы хотел взглянуть на твои товары».~ */ DO ~StartStore("Barse",Protagonist)
~ EXIT
  IF ~~ THEN REPLY #48215 /* ~«Еще нет».~ */ GOTO 20
END
